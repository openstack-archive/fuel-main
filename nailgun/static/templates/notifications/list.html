<div class="row-fluid">
  <div class="span12">
    <h3 class="page-title">Notifications</h3>
  </div>
</div>
<div class="notifications-list page-wrapper">
  <ul class="message-list" role="menu">
    <% if (notifications.deferred.state() != 'pending') { %>
      <% _.each(notifications.last(notifications.length).reverse(), function(notification) { %>
        <% var topic = notification.get('topic'), icons = {'error': 'icon-attention', 'discover': 'icon-bell'} %>
        <li class="notification-box enable-selection <%= notification.get('status') == 'unread' ? 'new' : '' %> <%= topic %>" data-id="<%= notification.id %>" data-node="<%- notification.get('node_id') %>">
          <div class="icon"><i class="<%= icons[topic] || 'icon-info-circled' %>"></i></div>
          <div class="datetime"><%= notification.escape('date') %> <%= notification.escape('time') %></div>
          <div class="message"><%= urlify(notification.escape('message')) %></div>
        </li>
      <% }) %>
    <% } else { %>
      <div class="row row-fluid">
        <div class="span4"></div>
        <div class="span4">
          <div class="progress progress-striped progress-success active">
            <div class="bar" style="width: 100%"></div>
          </div>
        </div>
      </div>
    <% } %>
  </ul>
</div>
